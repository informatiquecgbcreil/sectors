{% extends "layout.html" %}
{% block body %}
<div class="stack">
  <div class="card">
    {% include "_projet_budget_header.html" %}
    <div class="spacer"></div>
    <a class="btn" href="{{ url_for('projets.projet_budget_charges', projet_id=projet.id) }}">↩ Retour charges</a>
    <div class="spacer"></div>
    <form method="post" class="stack">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <label>Libellé</label>
      <input name="libelle" value="{{ charge.libelle }}" required>

      <div class="row three">
        <div class="stack">
          <label>Bloc</label>
          <select name="bloc">
            <option value="directe" {% if charge.bloc=='directe' %}selected{% endif %}>Directe</option>
            <option value="indirecte" {% if charge.bloc=='indirecte' %}selected{% endif %}>Indirecte</option>
          </select>
        </div>
        <div class="stack">
          <label>Code plan</label>
          <input name="code_plan" value="{{ charge.code_plan }}">
        </div>
        <div class="stack">
          <label>Prévisionnel (€)</label>
          <input name="montant_previsionnel" type="number" step="0.01" value="{{ charge.montant_previsionnel or 0 }}">
        </div>
        <div class="stack">
          <label>Réel (€)</label>
          <input name="montant_reel" type="number" step="0.01" value="{{ charge.montant_reel or 0 }}">
        </div>
      </div>

      <label>Commentaire</label>
      <input name="commentaire" value="{{ charge.commentaire or '' }}">

      <div class="row three">
        <button class="btn ok" type="submit">Enregistrer</button>
        <a class="btn" href="{{ url_for('projets.projet_budget_charges', projet_id=projet.id) }}">Annuler</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
