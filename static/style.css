/* =========================================================
   BASE
   ========================================================= */
:root{
  --text: #111111;
  --muted: #64748b;

  --bg: #f6f7f9;
  --surface: #ffffff;
  --surface-soft: #f1f5f9;

  --border: #e5e7eb;
  --border-soft: #cbd5e1;

  --accent: #3b82f6;
  --ok: #16a34a;
  --warn: #d97706;
  --danger: #dc2626;
}

body{
  background: var(--bg);
  color: var(--text);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

/* Helpers */
.muted{ color: var(--muted); }
.mono, .num{ font-variant-numeric: tabular-nums; }
.num{ text-align: right; }

/* =========================================================
   INPUTS / SELECTS
   ========================================================= */
input, select, textarea{
  background-color: #fff;
  color: var(--text);
  border: 1px solid #cccccc;
  padding: 6px 8px;
  border-radius: 10px;
  font-size: 14px;
}

select option{
  background-color: #fff;
  color: var(--text);
}

select:focus, input:focus, textarea:focus{
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(59,130,246,0.2);
}

/* =========================================================
   BUTTONS
   ========================================================= */
button, .btn{
  background: #e5e7eb;
  color: var(--text);
  border: 1px solid #ccc;
  padding: 6px 10px;
  border-radius: 10px;
  cursor: pointer;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

button:hover, .btn:hover{ background: #d1d5db; }

.btn.ok, button.ok{
  border-color: rgba(22,163,74,.35);
  background: rgba(22,163,74,.12);
}
.btn.warn, button.warn{
  border-color: rgba(217,119,6,.35);
  background: rgba(217,119,6,.12);
}
.btn.danger, button.danger{
  border-color: rgba(220,38,38,.35);
  background: rgba(220,38,38,.12);
}

/* =========================================================
   LAYOUT
   ========================================================= */
.stack{
  max-width: 1100px;
  margin: 0 auto;
  padding: 16px 18px 40px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.card{
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 14px;
  box-shadow: 0 8px 18px rgba(15, 23, 42, 0.06);
}

.spacer{ height: 10px; }

.section-title{
  font-weight: 900;
  margin-bottom: 10px;
}

/* =========================================================
   KPI
   ========================================================= */
.kpi-grid{
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 12px;
}

@media (max-width: 980px){
  .kpi-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 560px){
  .kpi-grid{ grid-template-columns: 1fr; }
}

.kpi-card{
  border: 1px solid var(--border);
  background: var(--surface);
  border-radius: 12px;
  padding: 12px;
}

.kpi-label{
  font-size: 12px;
  color: var(--muted);
  margin-bottom: 6px;
}

.kpi-value{
  font-size: 22px;
  font-weight: 900;
  letter-spacing: -0.01em;
  font-variant-numeric: tabular-nums;
}

.kpi-sub{
  margin-top: 4px;
  font-size: 12px;
  color: var(--muted);
}

.kpi-value--warn{ color: var(--warn); }
.kpi-value--danger{ color: var(--danger); }

.kpi-help{
  margin-top: 6px;
  font-size: 12px;
  color: var(--muted);
}

/* =========================================================
   METERS (PROGRESS BARS)
   ========================================================= */
.meter{
  height: 10px;
  border-radius: 999px;
  overflow: hidden;
  background: var(--surface-soft);
  border: 1px solid var(--border-soft);
}

.meter--thin{ height: 8px; }

.meter__fill{
  height: 100%;
  width: 0%;
  background: var(--accent);
  max-width: 100%;
}

.meter__fill--ok{ background: var(--ok); }
.meter__fill--warn{ background: var(--warn); }
.meter__fill--danger{ background: var(--danger); }

.legend{
  display:flex;
  flex-wrap: wrap;
  gap: 10px 18px;
  margin-top: 8px;
  font-size: 12px;
  color: var(--muted);
}

.balance-legend{
  display:flex;
  justify-content: space-between;
  gap: 12px;
  margin-top: 8px;
  flex-wrap: wrap;
}

/* =========================================================
   CALLOUTS
   ========================================================= */
.callout{
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
  background: #fff7ed;
}

.callout--warn{
  background: #fff7ed;
  border-color: rgba(217,119,6,.25);
}

.callout__title{
  font-weight: 900;
  margin-bottom: 6px;
}

.watch-list{
  margin: 0;
  padding-left: 18px;
}
.watch-list li{ margin: 4px 0; }

/* =========================================================
   TABLES
   ========================================================= */
.tablewrap{
  width: 100%;
  overflow: auto;
}

table{
  border-collapse: collapse;
  width: 100%;
  min-width: 720px;
}

th, td{
  padding: 8px 10px;
  border-bottom: 1px solid #e5e7eb;
  vertical-align: top;
}

th{
  text-align: left;
  background: #f1f5f9;
  position: sticky;
  top: 0;
  z-index: 2;
}

tbody tr:nth-child(even){ background: #fafafa; }
tbody tr:hover{ background: #eef2ff; }

/* Pills */
.pill{
  display: inline-flex;
  align-items: center;
  padding: 2px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 800;
  border: 1px solid var(--border-soft);
  background: var(--surface-soft);
}
.pill--ok{ border-color: rgba(22,163,74,.35); }
.pill--warn{ border-color: rgba(217,119,6,.35); }
.pill--danger{ border-color: rgba(220,38,38,.35); }

/* Cellule argent + mini barre + % */
.cell-money{
  display: grid;
  gap: 6px;
  justify-items: end;
}
.cell-money__main{ font-weight: 900; }
.cell-money__sub{ font-size: 12px; }

/* Actions */
.actions .btn{
  padding: 6px 10px;
  border-radius: 10px;
}

/* =========================================================
   FORM (simple)
   ========================================================= */
.row.three{
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px 12px;
  align-items: end;
}

@media (max-width: 980px){
  .row.three{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 560px){
  .row.three{ grid-template-columns: 1fr; }
}

/* =========================================================
   VENTILATION MATRIX
   ========================================================= */
.matrixwrap{ max-height: 72vh; }
table.matrix{ min-width: 980px; }

table.matrix thead th{
  position: sticky;
  top: 0;
  z-index: 3;
}

.matrix-head__title{ font-weight: 900; }
.matrix-head__sub{ font-size: 12px; margin-top: 2px; }

.sticky-col{
  position: sticky;
  left: 0;
  z-index: 4;
  background: var(--surface);
  border-right: 1px solid var(--border);
  min-width: 300px;
}

tbody tr:nth-child(even) .sticky-col{ background: #fafafa; }
tbody tr:hover .sticky-col{ background: #eef2ff; }

.charge-cell{ display:flex; flex-direction:column; gap: 2px; }
.charge-title{ line-height: 1.15; }
.charge-sub{ font-size: 12px; }

.matrix-input{ min-width: 140px; }
.matrix-input input{
  width: 120px;
  text-align: right;
  font-variant-numeric: tabular-nums;
  border-radius: 10px;
  padding: 8px 10px;
}

/* Input rempli = visuellement actif */
.matrix-input input:not(:placeholder-shown){
  background: #eef2ff;
  border-color: #6366f1;
  font-weight: 700;
}

.matrix-input input:focus{
  background: #e0e7ff;
}
